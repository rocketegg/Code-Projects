<section data-ng-controller="IndexController">
  <div class="row">
    <div class="col-sm-6">
      <form class="form-horizontal">
        <fieldset>
          <legend>RTCP Packet Simulator</legend>
          <div class="form-group">
            <label for="ip" class="col-lg-2 control-label">IP</label>
            <div class="col-lg-10">
              <input type="text" class="form-control" ng-model="options.ip" placeholder="e.g. 127.0.0.1">
            </div>
          </div>
          <div class="form-group">
            <label for="port" class="col-lg-2 control-label">Port</label>
            <div class="col-lg-10">
              <input type="number" class="form-control" ng-model="options.port" placeholder="(local server listens by default on: 5006)">
            </div>
          </div>
          <div class="form-group">
            <label for="iterations" class="col-lg-2 control-label">Iterations (per interval)</label>
            <div class="col-lg-10">
              <input type="number" class="form-control" ng-model="options.iterations" placeholder="e.g. 10">
            </div>
          </div>
          <div class="form-group">
            <label for="select" class="col-lg-2 control-label">Interval (s)</label>
            <div class="col-lg-10">
              <select class="form-control" ng-model="options.interval">
                <option>2</option>
                <option>5</option>
                <option>10</option>
                <option>15</option>
                <option>30</option>
              </select>
              <br>
            </div>
          </div>
          <div class="form-group">
            <div class="col-lg-10 col-lg-offset-2">
              <button class="btn btn-danger" ng-click="stop(options)" ng-class="{'disabled': !jobstatus || !(jobstatus.running == true)}">Stop</button>
              <button type="submit" ng-click="start(options)" class="btn btn-primary" ng-class="{'disabled': jobstatus && jobstatus.running == true}">Submit</button>
              <button ng-click="togglePolling()" class="btn btn-success"><span ng-show="isPolling">Pause </span><span ng-show="!isPolling">Start </span>Polling</button>
            </div>
          </div>
        </fieldset>
      </form>
    </div>
    <div class="col-sm-6">
      Sending Packets: <span class="label" ng-class="{'label-success': jobstatus.running, 'label-danger':!jobstatus.running}">{{jobstatus.running}}</span>
      <div class="row">
        <div class="col-sm-12" style="padding-top:20px; padding-bottom:20px">
          <input ng-model="slidervalue" type="text" id="mySlider1" slider options="slideroptions" />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-10">
          <span class="bold">From:</span> {{chartOptions.startTime | date:'short'}} <span class="bold">To:</span> {{chartOptions.endTime | date:'short'}}
        </div>
      </div>
      <div class="well">
        <div class="row">
          <div class="col-sm-12">
            <div google-chart chart="chartObjectStats"></div>
            <table class="table table-condensed table-bordered small">
              <tr>
                <th>#</th>
                <th>Timestamp</th>
                <th>Packets Returned</th>
                <th>Response Time (ms)</th>
              </tr>
              <tr class='warning' ng-show="lastChartObjectStatsRow">
                <td></td>
                <td>{{lastChartObjectStatsRow.c[0].v | date:'medium'}}</td>
                <td>{{lastChartObjectStatsRow.c[1].v}}</td>
                <td>{{lastChartObjectStatsRow.c[2].v}}</td>
              </tr>

            </table>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-12">

            <div google-chart chart="chartObject"></div>
            <table class="table table-condensed table-bordered small">
              <tr>
                <th>#</th>
                <th>Timestamp</th>
                <th>Packet Flow (#/interval)</th>
                <th>Unique IPs</th>
              </tr>
              <tr class='warning'>
                <td><a href="" ng-click="showCO = !showCO">More</a>
                </td>
                <td>{{lastChartObjectRow.c[0].v | date:'medium'}}</td>
                <td>{{lastChartObjectRow.c[1].v}}</td>
                <td>{{lastChartObjectRow.c[2].v}}
                  <div class="padded" ng-repeat="ip in chartData[chartData.length-1].stats.unique_ips">
                    <div class="label label-default normal">{{ip}}</div>
                  </div>
                </td>
              </tr>
              <tr ng-repeat="row in chartObject.data.rows" ng-show="showCO">
                <td>{{$index + 1}}</td>
                <td>{{row.c[0].v | date:'medium'}}
                </td>
                <td>{{row.c[1].v}}</td>
                <td>{{row.c[2].v}}</td>
              </tr>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>
